{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\New Movie Project\\\\MovieBookingWebsite\\\\movie-ticket\\\\src\\\\Components\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { useReducer, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const init = {\n    username: \"\",\n    password: \"\"\n  };\n  const reducer = (state, action) => {\n    switch (action.type) {\n      case 'update':\n        return {\n          ...state,\n          [action.fld]: action.val\n        };\n      case 'reset':\n        return init;\n    }\n  };\n  const [info, dispatch] = useReducer(reducer, init);\n  const [msg, setMsg] = useState(\"\");\n  const navigate = useNavigate();\n  const sendData = e => {\n    e.preventDefault();\n    const reqOptions = {\n      method: \"POST\",\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(info)\n    };\n    fetch(\"http://localhost:8080/chkLogin\", reqOptions).then(resp => resp.text()).then(text => text.length ? JSON.parse(text) : {}).then(obj => {\n      if (Object.keys(obj).length === 0) {\n        setMsg(\"Wrong UID/PWD\");\n      } else {\n        if (obj.role_id.role_id == 1) {\n          //customer home\n          navigate(\"/customer_home\");\n        } else if (obj.role_id.role_id == 2) {\n          //theatre home\n        } else if (obj.role_id.role_id == 3) {\n          //admin home\n        }\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"username\",\n          className: \"form-label\",\n          children: \"Enter username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"username\",\n          name: \"username\",\n          value: info.username,\n          onChange: e => {\n            dispatch({\n              type: 'update',\n              fld: 'username',\n              val: e.target.value\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"usernameHelp\",\n          className: \"form-text\",\n          children: \"username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          className: \"form-label\",\n          children: \"Enter password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"password\",\n          name: \"password\",\n          value: info.password,\n          onChange: e => {\n            dispatch({\n              type: 'update',\n              fld: 'password',\n              val: e.target.value\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"passwordHelp\",\n          className: \"form-text\",\n          children: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: JSON.stringify(info)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        onClick: e => {\n          sendData(e);\n        },\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"reset\",\n        className: \"btn btn-danger\",\n        onClick: () => {\n          dispatch({\n            type: 'reset'\n          });\n        },\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"iLLJ0HrCygBnJeZCak7nhdCldts=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useReducer","useState","useNavigate","jsxDEV","_jsxDEV","Login","_s","init","username","password","reducer","state","action","type","fld","val","info","dispatch","msg","setMsg","navigate","sendData","e","preventDefault","reqOptions","method","headers","body","JSON","stringify","fetch","then","resp","text","length","parse","obj","Object","keys","role_id","children","className","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","name","value","onChange","target","onClick","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/New Movie Project/MovieBookingWebsite/movie-ticket/src/Components/Login.js"],"sourcesContent":["import { useReducer, useState } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Login(){\r\n\r\n    const init={\r\n        username:\"\",\r\n        password:\"\"\r\n    }\r\n    const reducer=(state,action)=>{\r\n        switch(action.type)\r\n        {\r\n            case 'update':\r\n                return {...state, [action.fld]:action.val};\r\n            case 'reset':\r\n                    return init;\r\n\r\n        }\r\n    }\r\n    const [info,dispatch]=useReducer(reducer,init);\r\n    const [msg,setMsg]=useState(\"\")\r\n    const navigate=useNavigate();\r\n    const sendData=(e)=>{\r\n        e.preventDefault();\r\n        const reqOptions={\r\n            method:\"POST\",\r\n            headers:{'content-type':'application/json'},\r\n            body:JSON.stringify(info)\r\n        }\r\n        fetch(\"http://localhost:8080/chkLogin\",reqOptions)\r\n        .then(resp=>resp.text())\r\n        .then(text=>text.length?JSON.parse(text):{})\r\n        .then(obj=>{\r\n            if(Object.keys(obj).length===0)\r\n            {\r\n                setMsg(\"Wrong UID/PWD\")\r\n            }\r\n            else{\r\n               if(obj.role_id.role_id==1)\r\n               {\r\n                    //customer home\r\n                    navigate(\"/customer_home\")\r\n               }\r\n               else if(obj.role_id.role_id==2)\r\n               {\r\n                //theatre home\r\n               }\r\n               else if(obj.role_id.role_id==3)\r\n               {\r\n                //admin home\r\n               }\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div> \r\n             \r\n            <form>\r\n               \r\n                <div className=\"mb-3\">\r\n                    <label htmlFor=\"username\" className=\"form-label\">Enter username</label>\r\n                    <input type=\"text\" className=\"form-control\" id=\"username\"  name=\"username\" value={info.username}\r\n                    onChange={(e)=>{dispatch({type:'update',fld:'username',val:e.target.value})}}/>\r\n                    <div id=\"usernameHelp\" className=\"form-text\">username</div>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                    <label htmlFor=\"password\" className=\"form-label\">Enter password</label>\r\n                    <input type=\"text\" className=\"form-control\" id=\"password\"  name=\"password\" value={info.password} \r\n                    onChange={(e)=>{dispatch({type:'update',fld:'password',val:e.target.value})}}/>\r\n                    <div id=\"passwordHelp\" className=\"form-text\">password</div>\r\n                </div>\r\n                <p>{msg}</p>\r\n                <p>{JSON.stringify(info)}</p>\r\n                <button type=\"submit\" className=\"btn btn-primary\" onClick={(e)=>{sendData(e)}}>Submit</button>\r\n                <button type=\"reset\" className=\"btn btn-danger\" onClick={()=>{dispatch({type:'reset'})}}>Reset</button>\r\n            </form>                                                                                               \r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}